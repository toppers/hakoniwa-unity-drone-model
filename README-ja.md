[English](README.md) ï½œ æ—¥æœ¬èª

# ğŸš¨ã€é‡è¦ãªãŠçŸ¥ã‚‰ã› / Important Noticeã€‘ğŸš¨  
ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã¯ã€ã‹ã¤ã¦ Hakoniwa Drone Simulator ã® Unityç”¨ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ¢ãƒ‡ãƒ«ã¨ã—ã¦é–‹ç™ºã•ã‚Œã¾ã—ãŸãŒã€  
ç¾åœ¨ã¯å¾Œç¶™ã® [`hakoniwa-unity-drone`](https://github.com/hakoniwalab/hakoniwa-unity-drone) ã«å®Œå…¨ç§»è¡Œã—ã¦ã„ã¾ã™ã€‚

æœ¬ãƒªãƒã‚¸ãƒˆãƒªã®å†…å®¹ã¯ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ç›®çš„ã§æ®‹ã•ã‚Œã¦ãŠã‚Šã€ä»Šå¾Œã®æ›´æ–°ã‚„ã‚µãƒãƒ¼ãƒˆã¯è¡Œã‚ã‚Œã¾ã›ã‚“ã€‚  
æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®åˆ©ç”¨ã‚„å‚ç…§ã¯ã€å¿…ãšä»¥ä¸‹ã®å¾Œç¶™ãƒªãƒã‚¸ãƒˆãƒªã‚’ã”ç¢ºèªãã ã•ã„ã€‚

ğŸ‘‰ https://github.com/hakoniwalab/hakoniwa-unity-drone

----

ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã¯ã€PX4ã¨é€£æºå¯èƒ½ãªUnityã§ä½œã‚‰ã‚ŒãŸãƒ‰ãƒ­ãƒ¼ãƒ³ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã§ã™ã€‚

![image](images/tojinbo.png)

ã“ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã¯ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ã®ãƒ‰ãƒ­ãƒ¼ãƒ³é£›è¡Œã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚„ã€é£›è¡Œåˆ¶å¾¡ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®ãƒ†ã‚¹ãƒˆãªã©ã«ä½¿ç”¨ã§ãã¾ã™ã€‚

ãƒã‚¤ãƒ†ã‚£ãƒ–Windowsã§ç®±åº­ãƒ‰ãƒ­ãƒ¼ãƒ³ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã‚’åˆ©ç”¨ã•ã‚ŒãŸã„æ–¹ã¯ã€[ã“ã¡ã‚‰](README-win.md)ã‚’å‚ç…§ãã ã•ã„ã€‚

# ç›®æ¬¡

- [ç®±åº­ãƒ‰ãƒ­ãƒ¼ãƒ³ãƒ¢ãƒ‡ãƒ«](#ç®±åº­ãƒ‰ãƒ­ãƒ¼ãƒ³ãƒ¢ãƒ‡ãƒ«)
- [æ±å°‹åŠ3Dãƒ¢ãƒ‡ãƒ«](#æ±å°‹åŠ3Dãƒ¢ãƒ‡ãƒ«)
- [PX4ã¨ã®é€£æºã«ã¤ã„ã¦](#px4ã¨ã®é€£æºã«ã¤ã„ã¦)
- [ã‚µãƒãƒ¼ãƒˆç’°å¢ƒ](#ã‚µãƒãƒ¼ãƒˆç’°å¢ƒ)
  - [Macç’°å¢ƒ](#macç’°å¢ƒ)
  - [Windowsç’°å¢ƒ](#windows-ç’°å¢ƒ)
- [åˆ©ç”¨æ‰‹é †](#åˆ©ç”¨æ‰‹é †)
  - [Unityã‚¢ãƒ—ãƒªã‚’åˆ©ç”¨ã™ã‚‹å ´åˆ](#unityã‚¢ãƒ—ãƒªã‚’åˆ©ç”¨ã™ã‚‹å ´åˆ)
  - [Unityã‚¨ãƒ‡ã‚£ã‚¿ã‚’åˆ©ç”¨ã™ã‚‹å ´åˆ](#unityã‚¨ãƒ‡ã‚£ã‚¿ã‚’åˆ©ç”¨ã™ã‚‹å ´åˆ)
- [ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã¨ã‚µãƒãƒ¼ãƒˆ](#ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã¨ã‚µãƒãƒ¼ãƒˆ)
- [æœ¬ãƒªãƒã‚¸ãƒˆãƒªã®å†…å®¹ã¨ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã«ã¤ã„ã¦](#æœ¬ãƒªãƒã‚¸ãƒˆãƒªã®å†…å®¹ã¨ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã«ã¤ã„ã¦)
- [è²¢çŒ®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³](#è²¢çŒ®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³)

# ç®±åº­ãƒ‰ãƒ­ãƒ¼ãƒ³ãƒ¢ãƒ‡ãƒ«

Unityã§ä½œã‚‰ã‚ŒãŸãƒ‰ãƒ­ãƒ¼ãƒ³ãƒ¢ãƒ‡ãƒ«ã¯ã€ç®±åº­ã‚ªãƒªã‚¸ãƒŠãƒ«ãƒ¢ãƒ‡ãƒ«ã§ã‚ã‚Šã€ã‚¯ã‚¢ãƒƒãƒ‰ã‚³ãƒ—ã‚¿ãƒ¼å‹ã§ã®ã‚‚ã®ã§ã™ï¼ˆä¸‹å›³ï¼‰ã€‚

![image](https://github.com/toppers/hakoniwa-unity-drone-model/assets/164193/201fce8f-5f8c-43de-9d19-26870348624f)


ç®±åº­ãƒ‰ãƒ­ãƒ¼ãƒ³ãƒ¢ãƒ‡ãƒ«H1 ã®Unityã‚¢ã‚»ãƒƒãƒˆã¯,  ä¸­æ‘æ­©é«˜ã•ã‚“ã‚ˆã‚Šæä¾›ã„ãŸã ã„ãŸãƒ‡ãƒ¼ã‚¿ã‚’åŸºã«ä½œæˆã—ã¦ã„ã¾ã™ï¼ç®±åº­ã¸ã®OSSè²¢çŒ®ã«æ·±ãæ„Ÿè¬ã„ãŸã—ã¾ã™ï¼


# æ±å°‹åŠ3Dãƒ¢ãƒ‡ãƒ«

æ±å°‹åŠ3Dãƒ¢ãƒ‡ãƒ«ã¯ã€ä»¥ä¸‹ã®çš†æ§˜ã®å¤šå¤§ãªã”å”åŠ›ã®ã‚‚ã¨ä½œæˆã•ã‚Œã¾ã—ãŸã€‚

- ãƒãƒ¼ãƒãƒ£ãƒ«ã‚¹ã‚«ã‚¤ ä¸Šé‡æ§˜
  - æ±å°‹åŠã®é¢¨æ™¯ã‚’360åº¦ã‚«ãƒ¡ãƒ©ã§ãƒ‰ãƒ­ãƒ¼ãƒ³æ’®å½±ã„ãŸã ãã¾ã—ãŸã€‚
  - è©³ç´°ã¯ [ãƒãƒ¼ãƒãƒ£ãƒ«ã‚¹ã‚«ã‚¤å…¬å¼ã‚µã‚¤ãƒˆ](https://www.vsky2019.com/) ã‚’ã”è¦§ãã ã•ã„ã€‚

- å°æ£®ç ”ç©¶æ‰€ å°æ£®æ§˜
  - æ’®å½±ãƒ‡ãƒ¼ã‚¿ã‚’3Dãƒ¢ãƒ‡ãƒ«ã«å¤‰æ›ã„ãŸã ãã¾ã—ãŸã€‚
  - è©³ç´°ã¯ [å°æ£®ç ”ç©¶æ‰€å…¬å¼ã‚µã‚¤ãƒˆ](https://komori-lab.com/) ã‚’ã”è¦§ãã ã•ã„ã€‚

ã“ã®ãŠäºŒæ–¹ã®ã”å”åŠ›ãªãã—ã¦æœ¬ãƒ¢ãƒ‡ãƒ«ã¯å®Œæˆã—ã¾ã›ã‚“ã§ã—ãŸã€‚ç®±åº­ã¸ã®OSSè²¢çŒ®ã«æ·±ãæ„Ÿè¬ã„ãŸã—ã¾ã™ã€‚

æ±å°‹åŠ3Dãƒ¢ãƒ‡ãƒ«ã‚’ç®±åº­ãƒ‰ãƒ­ãƒ¼ãƒ³ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã«çµ„ã¿è¾¼ã‚€æ–¹æ³•ã¯[ã“ã¡ã‚‰](README-tojinbo.md)ã‚’ã”è¦§ãã ã•ã„ã€‚

# PX4ã¨ã®é€£æºã«ã¤ã„ã¦

ã“ã®ãƒ‰ãƒ­ãƒ¼ãƒ³ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã‚’PX4ã¨é€£æºã•ã›ã‚‹ã«ã¯ã€åˆ¥é€” hakoniwa-px4sim ãƒªãƒã‚¸ãƒˆãƒªãŒå¿…è¦ã§ã™ã€‚PX4ã¨ã®é€£æºæ–¹æ³•ã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã®ãƒªãƒ³ã‚¯å…ˆã«è©³ç´°ãªèª¬æ˜ãŒã‚ã‚Šã¾ã™ã®ã§ã€ã”ä¸€èª­ãã ã•ã„ã€‚

https://github.com/toppers/hakoniwa-px4sim

# ã‚µãƒãƒ¼ãƒˆç’°å¢ƒ

- [X] Intelç³» Mac
- [X] Armç³» Mac
- [X] Ubuntu
- [X] Windows 10/11

# åˆ©ç”¨æ‰‹é †
Unityå‘ã‘ç®±åº­ãƒ‰ãƒ­ãƒ¼ãƒ³ãƒ¢ãƒ‡ãƒ«ã¯ã€ä»¥ä¸‹ã®ï¼’ã¤ã®åˆ©ç”¨å½¢æ…‹ãŒã‚ã‚Šã¾ã™ã€‚

1. Unityã‚¢ãƒ—ãƒªã‚’åˆ©ç”¨ã™ã‚‹å ´åˆ
2. Unityã‚¨ãƒ‡ã‚£ã‚¿ã‚’åˆ©ç”¨ã™ã‚‹å ´åˆ

1 ã«ã¤ã„ã¦ã¯ã€ãƒ“ãƒ«ãƒ‰æ¸ˆã¿ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åˆ©ç”¨ã—ã¾ã™ã®ã§ã€ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã®æ‰‹é–“ã¯ç™ºç”Ÿã—ã¾ã›ã‚“ã€‚

2 ã«ã¤ã„ã¦ã¯ã€Unityã‚¨ãƒ‡ã‚£ã‚¿ã‚’åˆ©ç”¨ã—ã¾ã™ã®ã§ã€ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã®æ‰‹é–“ãŒç™ºç”Ÿã—ã¾ã™ã€‚

## Unityã‚¢ãƒ—ãƒªã‚’åˆ©ç”¨ã™ã‚‹å ´åˆ

### Unityã‚¢ãƒ—ãƒªã‚’åˆ©ç”¨ã™ã‚‹å ´åˆã®å¿…è¦ãªç’°å¢ƒ

Unityé–¢é€£ã®ç’°å¢ƒã¯ç‰¹ã«å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚

### Unityã‚¢ãƒ—ãƒªã‚’åˆ©ç”¨ã™ã‚‹å ´åˆã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•

æœ¬ãƒªãƒã‚¸ãƒˆãƒªã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã¾ã™ã€‚

```
git clone --recursive https://github.com/toppers/hakoniwa-unity-drone-model.git
```

ã‚¯ãƒ­ãƒ¼ãƒ³ãŒçµ‚ã‚ã£ãŸã‚‰ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç§»å‹•ã—ã¾ã™ã€‚

```
cd hakoniwa-unity-drone-model/
```

ä»¥ä¸‹ã®ã‚µã‚¤ãƒˆã‹ã‚‰ã€ã”åˆ©ç”¨ç’°å¢ƒã«å¿œã˜ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚

https://github.com/toppers/hakoniwa-unity-drone-model/releases

ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸzipãƒ•ã‚¡ã‚¤ãƒ«ã‚’ `hakoniwa-unity-drone-model` ã®ä¸‹ã§è§£å‡ã—ã¦ãã ã•ã„ã€‚

ä»¥ä¸‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã«ãªã‚Šã¾ã™ã€‚

```
hakoniwa-unity-drone-model/DroneApp<OS>
```

### Unityã‚¢ãƒ—ãƒªã®èµ·å‹•æ–¹æ³•

`hakoniwa-unity-drone-model` ç›´ä¸‹ã§ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

```
bash ./plugin/activate_app.bash DroneApp<OS>
```

Windows ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒªã®å ´åˆã¯ã€`DroneWinNative/model.exe` ã‚’ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

æˆåŠŸã™ã‚‹ã¨Unityã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒèµ·å‹•ã—ã¾ã™ã€‚


## Unityã‚¨ãƒ‡ã‚£ã‚¿ã‚’åˆ©ç”¨ã™ã‚‹å ´åˆ

### Unityã‚¨ãƒ‡ã‚£ã‚¿ã‚’åˆ©ç”¨ã™ã‚‹å ´åˆã«å¿…è¦ãªç’°å¢ƒ

- Homebrew(Macç‰ˆã®ã¿)
- Unity Hub
- Unityï¼ˆå„CPUã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«å¯¾å¿œã—ãŸã‚‚ã®ï¼‰
  - 2022.3.5f1 ä»¥é™

### Unityã‚¨ãƒ‡ã‚£ã‚¿ã‚’åˆ©ç”¨ã™ã‚‹å ´åˆã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•

æœ¬ãƒªãƒã‚¸ãƒˆãƒªã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã¾ã™ã€‚

```
git clone --recursive https://github.com/toppers/hakoniwa-unity-drone-model.git
```

ã‚¯ãƒ­ãƒ¼ãƒ³ãŒçµ‚ã‚ã£ãŸã‚‰ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç§»å‹•ã—ã¾ã™ã€‚

```
cd hakoniwa-unity-drone-model/
```

ãã—ã¦ã€å¿…è¦ãª Unity ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«é¡ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

MacOS/Ubuntuã€€ãŠã‚ˆã³ WSL2ã€€ã®å ´åˆï¼š

```
bash install.bash 
```

Winodwsã€€ã®å ´åˆï¼š

```
bash install.bash win
```


### Unityèµ·å‹•

ã“ã®çŠ¶æ…‹ã§ Unity Hub ã§å½“è©²ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é–‹ãã¾ã—ã‚‡ã†ã€‚

æ³¨æ„ï¼šUnityã‚¨ãƒ‡ã‚£ã‚¿ã¯ã€å½“è©²CPUã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«å¯¾å¿œã—ãŸã‚‚ã®ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã”åˆ©ç”¨ãã ã•ã„ã€‚

å¯¾è±¡ãƒ•ã‚©ãƒ«ãƒ€ï¼šhakoniwa-unity-drone-model\plugin\plugin-srcs

Unityã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³é•ã„ã«èµ·å› ã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆ"Opening Project in Non-Matching Editor Installation"ï¼‰ãŒå‡ºã‚‹å ´åˆã¯ã€ã€ŒContinueã€ã¨ã—ã¦å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚

ä»¥ä¸‹ã®ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒå‡ºã¾ã™ãŒã€`Continue` ã—ã¦ãã ã•ã„ã€‚

![image](https://github.com/toppers/hakoniwa-unity-drone-model/assets/164193/e1fbc477-4edc-4e39-ab15-ccd6f0707f33)


æ¬¡ã«ã€ä»¥ä¸‹ã®ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒå‡ºã¾ã™ã®ã§ã€`Ignore` ã—ã¦ãã ã•ã„ã€‚

![image](https://github.com/toppers/hakoniwa-unity-drone-model/assets/164193/7c03ae41-f988-44cb-9ac1-2263507d254d)


æˆåŠŸã™ã‚‹ã¨ã“ã†ãªã‚Šã¾ã™ã€‚

![image](https://github.com/toppers/hakoniwa-unity-drone-model/assets/164193/50398cfa-f6fc-4eef-9679-5442bbd9de76)

èµ·å‹•ç›´å¾Œã®çŠ¶æ…‹ã§ã™ã¨ã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ä¸Šã«ãŸãã•ã‚“ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã„ã¾ã™ã€‚åŸå› ã¯ä»¥ä¸‹ã®ï¼’ç‚¹ã§ã™ã€‚
ãƒªãƒ³ã‚¯å…ˆã‚’å‚ç…§ã—ã¦ã€é †ç•ªã«å¯¾å¿œã—ã¦ãã ã•ã„ã€‚

* [Newtonsoft.Json ãŒä¸è¶³ã—ã¦ã„ã‚‹](https://github.com/toppers/hakoniwa-document/tree/main/troubleshooting/unity#unity%E8%B5%B7%E5%8B%95%E6%99%82%E3%81%ABnewtonsoftjson%E3%81%8C%E3%81%AA%E3%81%84%E3%81%A8%E3%81%84%E3%81%86%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%8C%E5%87%BA%E3%82%8B)
* [gRPC ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªåˆ©ç”¨ç®‡æ‰€ãŒã‚¨ãƒ©ãƒ¼å‡ºåŠ›ã—ã¦ã„ã‚‹](https://github.com/toppers/hakoniwa-document/blob/main/troubleshooting/unity/README.md#grpc-%E3%81%AE%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E5%88%A9%E7%94%A8%E7%AE%87%E6%89%80%E3%81%8C%E3%82%A8%E3%83%A9%E3%83%BC%E5%87%BA%E5%8A%9B%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B)(Macã¾ãŸã¯Linuxã®ã¨ã)


### ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç’°å¢ƒã®æº–å‚™

ä¸‹å›³ã®ã‚ˆã†ã«ã€Unity ã®ã‚·ãƒ¼ãƒ³ï¼ˆ`Assets/Scenes/ApiDemo`ï¼‰ã‚’ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

![image](images/ProjectApiDemoScene.png)


#### ã‚³ãƒ³ãƒ•ã‚£ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‡ºåŠ›

ãã—ã¦ã€`Window` -> `Hakoniwa` -> `Generate` ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2023-08-28 7 59 45](https://github.com/toppers/hakoniwa-unity-picomodel/assets/164193/85ab96b7-fd8b-4547-a4a3-c386d0a35813)


æˆåŠŸã™ã‚‹ã¨ã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ä¸Šã«ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°å‡ºåŠ›ãŒãªãã€ä¸‹å›³ã®ã‚ˆã†ã« json ã®ãƒ­ã‚°ãŒå‡ºåŠ›ã•ã‚Œã¦ã„ã¾ã™ã€‚

![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2023-08-28 8 00 16](https://github.com/toppers/hakoniwa-unity-picomodel/assets/164193/6fa55a56-1693-4728-b0ef-091e10fb4b22)

Windowsã®å ´åˆã€æœ¬ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€ãƒã‚·ãƒ³å†èµ·å‹•æ™‚ã«å¿…ãšå†å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

#### ã‚³ãƒ³ãƒ•ã‚£ã‚°ãƒ•ã‚¡ã‚¤ãƒ«

ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ³ãƒ•ã‚£ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ãŒã€`hakoniwa-unity-drone-model\plugin\plugin-srcs` ç›´ä¸‹ã«ç”Ÿæˆã•ã‚Œã¾ã™ã€‚

* [core_config.json](https://github.com/toppers/hakoniwa-document/blob/main/architecture/assets/README-unity.md#%E7%AE%B1%E5%BA%AD%E3%82%B3%E3%83%B3%E3%83%95%E3%82%A3%E3%82%B0%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E5%85%A5%E5%8A%9Bcore_configjson)
* custom.json

custom.jsonã®å‡ºåŠ›ã¯ä»¥ä¸‹ã®é€šã‚Šã¨ãªã‚Šã¾ã™ã€‚


```json
{
  "robots": [
    {
      "name": "DroneTransporter",
      "rpc_pdu_readers": [],
      "rpc_pdu_writers": [],
      "shm_pdu_readers": [
        {
          "type": "hako_mavlink_msgs/HakoHilActuatorControls",
          "org_name": "drone_motor",
          "name": "DroneTransporter_drone_motor",
          "class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduReader",
          "conv_class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduReaderConverter",
          "channel_id": 0,
          "pdu_size": 112,
          "write_cycle": 1,
          "method_type": "SHM"
        },
        {
          "type": "geometry_msgs/Twist",
          "org_name": "drone_pos",
          "name": "DroneTransporter_drone_pos",
          "class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduReader",
          "conv_class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduReaderConverter",
          "channel_id": 1,
          "pdu_size": 72,
          "write_cycle": 1,
          "method_type": "SHM"
        },
        {
          "type": "hako_msgs/ManualPosAttControl",
          "org_name": "drone_manual_pos_att_control",
          "name": "DroneTransporter_drone_manual_pos_att_control",
          "class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduWriter",
          "conv_class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduWriterConverter",
          "channel_id": 3,
          "pdu_size": 80,
          "write_cycle": 1,
          "method_type": "SHM"
        },
        {
          "type": "hako_msgs/HakoDroneCmdTakeoff",
          "org_name": "drone_cmd_takeoff",
          "name": "DroneTransporter_drone_cmd_takeoff",
          "class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduWriter",
          "conv_class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduWriterConverter",
          "channel_id": 5,
          "pdu_size": 64,
          "write_cycle": 1,
          "method_type": "SHM"
        },
        {
          "type": "hako_msgs/HakoDroneCmdMove",
          "org_name": "drone_cmd_move",
          "name": "DroneTransporter_drone_cmd_move",
          "class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduWriter",
          "conv_class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduWriterConverter",
          "channel_id": 6,
          "pdu_size": 80,
          "write_cycle": 1,
          "method_type": "SHM"
        },
        {
          "type": "hako_msgs/HakoDroneCmdLand",
          "org_name": "drone_cmd_land",
          "name": "DroneTransporter_drone_cmd_land",
          "class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduWriter",
          "conv_class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduWriterConverter",
          "channel_id": 7,
          "pdu_size": 64,
          "write_cycle": 1,
          "method_type": "SHM"
        },
        {
          "type": "hako_msgs/GameControllerOperation",
          "org_name": "hako_cmd_game",
          "name": "DroneTransporter_hako_cmd_game",
          "class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduWriter",
          "conv_class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduWriterConverter",
          "channel_id": 8,
          "pdu_size": 136,
          "write_cycle": 1,
          "method_type": "SHM"
        },
        {
          "type": "hako_msgs/HakoCmdCamera",
          "org_name": "hako_cmd_camera",
          "name": "DroneTransporter_hako_cmd_camera",
          "class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduWriter",
          "conv_class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduWriterConverter",
          "channel_id": 9,
          "pdu_size": 44,
          "write_cycle": 1,
          "method_type": "SHM"
        },
        {
          "type": "hako_msgs/HakoCmdCameraMove",
          "org_name": "hako_cmd_camera_move",
          "name": "DroneTransporter_hako_cmd_camera_move",
          "class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduWriter",
          "conv_class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduWriterConverter",
          "channel_id": 11,
          "pdu_size": 64,
          "write_cycle": 1,
          "method_type": "SHM"
        },
        {
          "type": "hako_msgs/HakoCmdMagnetHolder",
          "org_name": "hako_cmd_magnet_holder",
          "name": "DroneTransporter_hako_cmd_magnet_holder",
          "class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduWriter",
          "conv_class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduWriterConverter",
          "channel_id": 13,
          "pdu_size": 40,
          "write_cycle": 1,
          "method_type": "SHM"
        }
      ],
      "shm_pdu_writers": [
        {
          "type": "hako_msgs/Collision",
          "org_name": "drone_collision",
          "name": "DroneTransporter_drone_collision",
          "class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduWriter",
          "conv_class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduWriterConverter",
          "channel_id": 2,
          "pdu_size": 304,
          "write_cycle": 1,
          "method_type": "SHM"
        },
        {
          "type": "hako_msgs/Disturbance",
          "org_name": "drone_disturbance",
          "name": "DroneTransporter_drone_disturbance",
          "class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduWriter",
          "conv_class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduWriterConverter",
          "channel_id": 4,
          "pdu_size": 32,
          "write_cycle": 1,
          "method_type": "SHM"
        },
        {
          "type": "hako_msgs/HakoCameraData",
          "org_name": "hako_camera_data",
          "name": "DroneTransporter_hako_camera_data",
          "class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduWriter",
          "conv_class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduWriterConverter",
          "channel_id": 10,
          "pdu_size": 102968,
          "write_cycle": 1,
          "method_type": "SHM"
        },
        {
          "type": "hako_msgs/HakoCameraInfo",
          "org_name": "hako_cmd_camera_info",
          "name": "DroneTransporter_hako_cmd_camera_info",
          "class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduWriter",
          "conv_class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduWriterConverter",
          "channel_id": 12,
          "pdu_size": 56,
          "write_cycle": 1,
          "method_type": "SHM"
        },
        {
          "type": "hako_msgs/HakoStatusMagnetHolder",
          "org_name": "hako_status_magnet_holder",
          "name": "DroneTransporter_hako_status_magnet_holder",
          "class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduWriter",
          "conv_class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduWriterConverter",
          "channel_id": 14,
          "pdu_size": 32,
          "write_cycle": 1,
          "method_type": "SHM"
        },
        {
          "type": "sensor_msgs/PointCloud2",
          "org_name": "lidar_points",
          "name": "DroneTransporter_lidar_points",
          "class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduWriter",
          "conv_class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduWriterConverter",
          "channel_id": 15,
          "pdu_size": 177400,
          "write_cycle": 5,
          "method_type": "SHM"
        },
        {
          "type": "geometry_msgs/Twist",
          "org_name": "lidar_pos",
          "name": "DroneTransporter_lidar_pos",
          "class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduWriter",
          "conv_class_name": "Hakoniwa.PluggableAsset.Communication.Pdu.Raw.RawPduWriterConverter",
          "channel_id": 16,
          "pdu_size": 72,
          "write_cycle": 5,
          "method_type": "SHM"
        }
      ]
    }
  ]
}
```


# ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã¨ã‚µãƒãƒ¼ãƒˆ

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«é–¢ã™ã‚‹è³ªå•ã‚„ãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³ã¯ã€[ç®±åº­ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ•ã‚©ãƒ¼ãƒ©ãƒ ](https://github.com/toppers/hakoniwa/discussions)ã§è¡Œã‚ã‚Œã¦ã„ã¾ã™ã€‚ã“ã“ã§ã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«é–¢ã™ã‚‹ç–‘å•ã®è§£æ¶ˆã€ã‚¢ã‚¤ãƒ‡ã‚¢ã®å…±æœ‰ã€ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã®æä¾›ãŒã§ãã¾ã™ã€‚ã¾ãŸã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æœ€æ–°æƒ…å ±ã‚„ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã«ã¤ã„ã¦ã‚‚ã€ã“ã“ã§æƒ…å ±å…±æœ‰ã•ã‚Œã¾ã™ã€‚

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«é–¢ã™ã‚‹è³ªå•ã‚„ææ¡ˆãŒã‚ã‚‹å ´åˆã€ã¾ãŸã¯åŒã˜å•é¡Œã«ç›´é¢ã—ã¦ã„ã‚‹ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨æ„è¦‹äº¤æ›ã‚’ã—ãŸã„å ´åˆã¯ã€é æ…®ãªã[ã“ã¡ã‚‰](https://github.com/toppers/hakoniwa/discussions)ã«æŠ•ç¨¿ã—ã¦ãã ã•ã„ã€‚


# æœ¬ãƒªãƒã‚¸ãƒˆãƒªã®å†…å®¹ã¨ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã«ã¤ã„ã¦

æœ¬ãƒªãƒã‚¸ãƒˆãƒªã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«é–¢ã—ã¦ã¯ã€å„ãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ãŒæ˜è¨˜ã•ã‚Œã¦ã„ã‚‹å ´åˆã€ãã®ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã«å¾“ã„ã¾ã™ã€‚ç‰¹ã«æ˜è¨˜ã•ã‚Œã¦ã„ãªã„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«ã¤ã„ã¦ã¯ã€[TOPPERSãƒ©ã‚¤ã‚»ãƒ³ã‚¹](https://www.toppers.jp/license.html) ã«åŸºã¥ã„ã¦å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚

TOPPERSãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¯ã€ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãŸã‚ã®ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã§ã‚ã‚Šã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®ä½¿ç”¨ã€å¤‰æ›´ã€é…å¸ƒã«é–¢ã™ã‚‹æ¡ä»¶ã‚’å®šã‚ã¦ã„ã¾ã™ã€‚ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®è©³ç´°ã«ã¤ã„ã¦ã¯ã€ä¸Šè¨˜ãƒªãƒ³ã‚¯ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

# è²¢çŒ®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ã®è²¢çŒ®ã«èˆˆå‘³ã‚’æŒã£ã¦ã„ãŸã ãã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚æ§˜ã€…ãªå½¢ã§ã®è²¢çŒ®ã‚’æ­“è¿ã—ã¦ã„ã¾ã™ã€‚ä»¥ä¸‹ã«ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ã®è²¢çŒ®æ–¹æ³•ã«ã¤ã„ã¦ã®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã‚’ç¤ºã—ã¾ã™ã€‚

## ã‚¤ã‚·ãƒ¥ãƒ¼ã®å ±å‘Š

- ãƒã‚°ã®å ±å‘Šã‚„æ–°æ©Ÿèƒ½ã®ææ¡ˆãªã©ã¯ã€GitHubã®Issuesã‚’é€šã˜ã¦è¡Œã£ã¦ãã ã•ã„ã€‚
- issue ã‚’ä½œæˆã™ã‚‹å‰ã«ã€åŒæ§˜ã® issue ãŒæ—¢ã«å­˜åœ¨ã—ãªã„ã‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚
- issue ã‚’ä½œæˆã™ã‚‹éš›ã¯ã€ã§ãã‚‹ã ã‘å¤šãã®æƒ…å ±ã‚’æä¾›ã—ã¦ãã ã•ã„ã€‚å†ç¾æ‰‹é †ã€æœŸå¾…ã•ã‚Œã‚‹æŒ™å‹•ã€å®Ÿéš›ã®æŒ™å‹•ã€ä½¿ç”¨ã—ã¦ã„ã‚‹ç’°å¢ƒãªã©ãŒå«ã¾ã‚Œã¾ã™ã€‚

## ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆ

- æ©Ÿèƒ½è¿½åŠ ã‚„ãƒã‚°ä¿®æ­£ãªã©ã€ã‚³ãƒ¼ãƒ‰ã«é–¢ã™ã‚‹è²¢çŒ®ã¯ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€šã˜ã¦è¡Œã£ã¦ãã ã•ã„ã€‚
- æ–°æ©Ÿèƒ½ã®è¿½åŠ ã‚„å¤§ããªå¤‰æ›´ã®å ´åˆã¯ã€äº‹å‰ã«é–¢é€£ã™ã‚‹ issue  ã§è­°è«–ã‚’è¡Œã†ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚
- ã‚³ãƒ¼ãƒ‰ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚„ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã«ä¸€è²«æ€§ã‚’æŒãŸã›ã‚‹ãŸã‚ã€æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«ã«å¾“ã£ã¦ãã ã•ã„ã€‚

## ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³

- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«é–¢ã™ã‚‹ãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³ã‚„è³ªå•ã¯ã€[Discussions](https://github.com/toppers/hakoniwa/discussions)ã§è¡Œã£ã¦ãã ã•ã„ã€‚
- ä»–ã®è²¢çŒ®è€…ã¨ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€æ•¬æ„ã‚’æŒã£ã¦è¡Œã£ã¦ãã ã•ã„ã€‚

## ãã®ä»–ã®è²¢çŒ®

- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ”¹å–„ã‚„ç¿»è¨³ãªã©ã€ã‚³ãƒ¼ãƒ‰ä»¥å¤–ã®è²¢çŒ®ã‚‚æ­“è¿ã—ã¾ã™ã€‚
